---
title: '方法'
description: ''
---

#### init(option: object): Promise
> ```js
> duix.init({
>   sign: '',
>   containerLable: '.remote-container'   
> })
> ```

***参数***

| 名称| 类型 |必填 | 描述 | 
| :-----------------| :-------------- | :----------------------------------------------------------- | :------    | 
| containerLable   | string   |  是 |  数字人容器。数字人将渲染到这个Dom中。 | 
| sign | string   |   是    |  鉴权字符串。[如何获取sign?](https://duix.guiji.ai/document/server-api/sign.html) |

#### start(option:object): Promise

调用 `start` 方法将开始渲染数字人并进行交互。
> **注意：** 此方法需要在`intialSucccess`事件触发后调用，`intialSucccess`事件表示所有资源准备完成。如下：
>
> ```js
> duix.on('intialSucccess', () => {
>   duix.start({
>      conversationId: '',    
>      muted: true,
>      wipeGreen: false,
>  }).then(res => {
>     console.log('res', res)
>  })
> })
> ```

***参数***

| key         | 类型    | 必填 | 默认值 | 说明                                                         |
| ----------- | ------- | ---- | ------ | ------------------------------------------------------------ |
| conversationId| number | 是 | | 平台会话id|
| muted       | boolean | 否   | false  | 是否以静音的模式开启数字人视频。<br/>**重要提示:** 由于[自动播放政策](https://developer.mozilla.org/zh-CN/docs/Web/Media/Autoplay_guide)限制，如果您的网页还没有与用户有任何点击交互，请把这个参数置为`true`，**否则将导致数字人无法加载**。如果您有这样的需求，建议您先用静音模式启动，在产品中设计一个交互，比如一个“开始”的按钮来调用`duix.setVideoMuted(false)` |
| openAsr     | boolean | 否   | false  | 是否直接开启实时识别，此项传true，相当于在调start后立即调用 `openAsr` 方法 |
| wipeGreen   | boolean | 否   | false  | 是否对视频做扣绿幕操作。*在平台上创建会话时需上传一个纯绿色的背景图片* |
| userId   | number | 否   | | 用户唯一标识 |

#### setVideoMuted(flag:boolean)

设置数字人视频是否静音, true是静音，false为非静音。

#### break()

打断数字人说话

#### speak(option: Object): Promise

驱动数字人说话，支持文本驱动和音频文件驱动。

```javascript
duix.speak({content: '', audio: 'https://your.website.com/xxx/x.wav'})
```

***参数***

| 名称| 类型 |必填 | 描述 | 
| :-----------------| :-------------- | :----------------------------------------------------------- | ------    | 
| content   | string   |  是 |  数字人回答的文本 |
| audio | string   |   否    |  数字人回答音频地址，可以通过`getAnswer`获取平台配置的答案|
| interrupt | boolean   |   否    |  是否打断之前说的话 |

#### answer(option: Object): Promise

数字人回答问题

```javascript
duix.answer({question: 'xxx'})
```

***参数***

| 名称| 类型 |必填 | 描述 | 
| :-----------------| :-------------- | :----------------------------------------------------------- | ------    | 
| question   | string   |  是 |  问题文本 |
| interrupt | boolean   |   否    |  是否打断之前说的话 |

#### getAnswer(option: Object): Promise

平台获取问题的答案

```javascript
duix.getAnswer({ question: '今天的天气怎么样？' })
```

***参数***

| 名称| 类型 |必填 | 描述 | 
| :-----------------| :-------------- | :----------------------------------------------------------- | ------    | 
| question   | string   |  是 |  问题文本 | 
| userId   | number   |  否 |  业务侧用户唯一id，指定后获得答案是开启记忆功能 | 


***返回data***

| 名称| 类型 | 描述 | 
| :-----------------| :-------------- | :----------------------------------------------------------- | 
| answer   | string   | 数字人回答的文本 |  
| audio | string   |   数字人回答音频地址 |

#### startRecord():Promise

开始录音。

#### stopRecord():Promise

结束录音，录音成功后将返加语音识别结果（文本），返回Promise。

#### openAsr():Promise

开启语音实时识别(注意此方法需在show触发时候调用)。开启语音实时识别后，可通过监听 `asrResult` 事件，接收识别（文本）结果。

#### closeAsr():Promise

关闭语音实时识别。

#### stop()

停止当前会话。建议在页卸载事件中调用此方法，以防止刷新或关闭网页时当前会话资源未及时释放。

```js
window.addEventListener('beforeunload', function(event) {
  if (duix) {
    duix.stop()
  }
});
````

#### getLocalStream()

获取本地语音流，方便外部做音频可视化等功能

#### getRemoteStream()

获取远端音视频流，方便外部做自定义

#### resume()

恢复播放，目前仅针对部分移动端浏览器即便由用户操作触发自动播放，仍无效的情况。在抛出4009的error中由用户操作触发resume方法可解决。

#### on(eventname, callback)

监听事件。

##### 参数

###### eventname

事件名称，详见下方表格。

###### callback

回调函数

## 返回格式说明
对于返回`Promise`的方法，参数格式为` { err, data } `,如果`err`不为空，则代表调用失败。